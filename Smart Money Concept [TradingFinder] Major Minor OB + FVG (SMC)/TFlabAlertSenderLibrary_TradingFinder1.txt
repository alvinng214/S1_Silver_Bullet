// This Pine Script‚Ñ¢ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// ¬© TFlab
//@version=5
// @description TODO: add library description here
library("AlertSenderLibrary_TradingFinder" , overlay = true)


export AlertSender (bool Condition, string Alert, string AlertName, string AlertType, string DetectionType , string SetupData , string Frequncy, string UTC ,string MoreInfo, string Message ,
     float o, float h, float l, float c , float Entry , float TP, float SL ,float Distal, float Proximal ) =>
    bool condition       = Condition
    string alert         = Alert
    string alertname     = AlertName
    string message       = Message
    string alerttype     = AlertType
    string frequncy      = Frequncy 
    string detectiontype = DetectionType
    string moreinfo      = MoreInfo
    float O = o
    float H = h
    float L = l
    float C = c    
    float entry = Entry
    float tp = TP
    float sl = SL
    Time = str.format_time(time, "    yy-MM-dd \n    HH:mm:ss", UTC) 



    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    string Type = if detectiontype == 'Signal' or detectiontype == 'Order Block Signal' or  detectiontype == 'Setup'                           //
        if alerttype == 'Bullish'                                                                                                              // 
            'Long ' + detectiontype                                                                                                            //
        else if alerttype == 'Bearish'                                                                                                         //
            'Short ' + detectiontype                                                                                                           //
    else                                                                                                                                       //
        alerttype+ ' ' +detectiontype                                                                                                          //
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// 


    /////////////////////////////////////////////////////////////
    tf = timeframe.period                                      //
    tfcalculator =if str.contains(tf, 'S')                     //
        if  tf == 'S'                                          //
            ' 1 Second'                                        //
        else                                                   //
            str.substring(tf, 0,str.length(tf)-1) + ' Seconds' //
    else if str.contains(tf, 'D')                              //
        if tf == 'D'                                           //
            ' Daily'                                           //
        else                                                   //  
            str.substring(tf, 0,str.length(tf)-1) + ' Days'    //
    else if str.contains(tf, 'W')                              //
        if tf == 'W'                                           //
            ' Weakly'                                          //
        else                                                   //
            str.substring(tf, 0,str.length(tf)-1) + ' Weaks'   //
    else if str.contains(tf, 'M')                              //
        if tf == 'M'                                           //
            ' Monthly'                                         //
        else                                                   //
            str.substring(tf, 0,str.length(tf)-1) + ' Months'  //
    else if str.contains(tf, '')                               //
        if str.tonumber(tf) < 60                               //
            if tf == '1'                                       //
                '1 Minute'                                     //
            else                                               //
                tf + ' Minutes'                                //
        else if str.tonumber(tf) >= 60                         //
            if  tf == '60'                                     //
                ' 1 Hour'                                      //
            else                                               //
                str.tostring(str.tonumber(tf) / 60) + ' Hours' //
    /////////////////////////////////////////////////////////////


    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    messagetext   = if MoreInfo == 'Off'                                                                                                             
        '‚è∞Alert Name: ' + alertname + '\n‚ÄºÔ∏èAlert Type: ' + Type  + '\nüî†Symbol: ' + syminfo.ticker + '\nüìàTime Frame: ' + tfcalculator                
         +  '\nüì©Message: ' + message                                                                                                                 
    else if MoreInfo == 'On'                                                                                                                          
        if DetectionType == 'Order Block Signal'                                                                                                      
            '‚è∞Alert Name: ' + alertname + '\n‚ÄºÔ∏èAlert Type: ' + Type  + '\nüî†Symbol: ' + syminfo.ticker + '\nüìàTime Frame: ' + tfcalculator +          
             '\nüïòTime:' + '\n' + Time +                                                                                                               
             '\nüßÆZone Price =>' + '\n     Distal:' + str.tostring(Distal) + '\n     Proximal:' + str.tostring(Proximal)  + '\nüì©Message: ' + message  
        else if DetectionType == 'Signal'                                                                                                               
            '‚è∞Alert Name: ' + alertname + '\n‚ÄºÔ∏èAlert Type: ' + Type  + '\nüî†Symbol: ' + syminfo.ticker + '\nüìàTime Frame: ' + tfcalculator +          
             '\nüïòTime:' + '\n' + Time +                                                                                                              
             '\nüßÆmarket price =>' + '\n     Open:' + str.tostring(O) + '\n     High:' + str.tostring(H)  + 
             '\n     Low:' + str.tostring(L) + '\n     Close:' + str.tostring(C)  +'\nüì©Message: ' + message 
        else if DetectionType == 'Setup'
            if SetupData == 'Full'     
                '‚è∞Alert Name: ' + alertname + '\n‚ÄºÔ∏èAlert Type: ' + Type  + '\nüî†Symbol: ' + syminfo.ticker + '\nüìàTime Frame: ' + tfcalculator +          
                 '\nüïòTime:' + '\n' + Time +                                                                                                              
                 '\nüßÆSetup Price Data =>' + '\n     Entry:' + str.tostring(entry) + '\n     Stop Loss:' + str.tostring(sl)  + 
                 '\n     Take Profit:' + str.tostring(tp)  +'\nüì©Message: ' + message 
            else if SetupData == 'Basic'
                '‚è∞Alert Name: ' + alertname + '\n‚ÄºÔ∏èAlert Type: ' + Type  + '\nüî†Symbol: ' + syminfo.ticker + '\nüìàTime Frame: ' + tfcalculator +          
                 '\nüïòTime:' + '\n' + Time +                                                                                                              
                 '\nüßÆSetup Price Data =>' + '\n     Entry:' + str.tostring(O) +'\nüì©Message: ' +  message 
        else if DetectionType == 'Analysis'                                                                                                             
            '‚è∞Alert Name: ' + alertname + '\n‚ÄºÔ∏èAlert Type: ' + Type  + '\nüî†Symbol: ' + syminfo.ticker + '\nüìàTime Frame: ' + tfcalculator                
             +  '\nüì©Message: ' + message 
        else                                                                                                                                          
            '‚è∞Alert Name: ' + alertname + '\n‚ÄºÔ∏èAlert Type: ' + Type  + '\nüî†Symbol: ' + syminfo.ticker + '\nüìàTime Frame: ' + tfcalculator +         
             '\nüïòTime:' + '\n' + Time +  '\nüì©Message: ' + message                                                                                   
    
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    

    if alert == 'On'
        if condition
            if frequncy == 'All'
                alert(messagetext,  alert.freq_all )
            if frequncy == 'Once Per Bar'
                alert(messagetext,  alert.freq_once_per_bar )     
            if frequncy == 'Once Per Bar Close'
                alert(messagetext,  alert.freq_once_per_bar_close )    
                      




 

    












		

